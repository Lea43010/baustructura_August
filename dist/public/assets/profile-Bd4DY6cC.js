import{r as l,j as e,P as Q,s as K,k as J,$ as ge,m as fe,o as je,a8 as ve,a9 as we,e as Pe,v as be,u as Ne,y as ye,w as Se,z as F,A as L,x as ke,C as I,b as T,d as A,U as W,a6 as B,a as M,B as p,D as i,I as c,aa as O,a4 as Z}from"./index-CyhjQ_VK.js";import{B as Ce}from"./badge-BZr39Q1C.js";import{A as ze}from"./arrow-left-C8JrTeqc.js";import{C as Ee}from"./camera-BUbOfpe-.js";import{U as Fe}from"./upload-DB7pjTN6.js";import{S as Ie}from"./shield-DX56K7pi.js";import{S as Te}from"./server-DRk7dtT5.js";import{S as Ae}from"./settings-RhnSVDqX.js";var Be="Separator",Y="horizontal",Me=["horizontal","vertical"],X=l.forwardRef((s,h)=>{const{decorative:a,orientation:u=Y,...o}=s,f=De(u)?u:Y,x=a?{role:"none"}:{"aria-orientation":f==="vertical"?f:void 0,role:"separator"};return e.jsx(Q.div,{"data-orientation":f,...x,...o,ref:h})});X.displayName=Be;function De(s){return Me.includes(s)}var ee=X;const S=l.forwardRef(({className:s,orientation:h="horizontal",decorative:a=!0,...u},o)=>e.jsx(ee,{ref:o,decorative:a,orientation:h,className:K("shrink-0 bg-border",h==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...u}));S.displayName=ee.displayName;var D="Switch",[Ue,We]=fe(D),[Re,He]=Ue(D),se=l.forwardRef((s,h)=>{const{__scopeSwitch:a,name:u,checked:o,defaultChecked:f,required:j,disabled:x,value:v="on",onCheckedChange:k,form:g,...C}=s,[t,n]=l.useState(null),d=J(h,b=>n(b)),w=l.useRef(!1),N=t?g||!!t.closest("form"):!0,[P,z]=ge({prop:o,defaultProp:f??!1,onChange:k,caller:D});return e.jsxs(Re,{scope:a,checked:P,disabled:x,children:[e.jsx(Q.button,{type:"button",role:"switch","aria-checked":P,"aria-required":j,"data-state":ne(P),"data-disabled":x?"":void 0,disabled:x,value:v,...C,ref:d,onClick:je(s.onClick,b=>{z($=>!$),N&&(w.current=b.isPropagationStopped(),w.current||b.stopPropagation())})}),N&&e.jsx(ae,{control:t,bubbles:!w.current,name:u,value:v,checked:P,required:j,disabled:x,form:g,style:{transform:"translateX(-100%)"}})]})});se.displayName=D;var re="SwitchThumb",te=l.forwardRef((s,h)=>{const{__scopeSwitch:a,...u}=s,o=He(re,a);return e.jsx(Q.span,{"data-state":ne(o.checked),"data-disabled":o.disabled?"":void 0,...u,ref:h})});te.displayName=re;var _e="SwitchBubbleInput",ae=l.forwardRef(({__scopeSwitch:s,control:h,checked:a,bubbles:u=!0,...o},f)=>{const j=l.useRef(null),x=J(j,f),v=ve(a),k=we(h);return l.useEffect(()=>{const g=j.current;if(!g)return;const C=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(C,"checked").set;if(v!==a&&n){const d=new Event("click",{bubbles:u});n.call(g,a),g.dispatchEvent(d)}},[v,a,u]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...o,tabIndex:-1,ref:x,style:{...o.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});ae.displayName=_e;function ne(s){return s?"checked":"unchecked"}var ie=se,Ve=te;const q=l.forwardRef(({className:s,...h},a)=>e.jsx(ie,{className:K("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...h,ref:a,children:e.jsx(Ve,{className:K("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));q.displayName=ie.displayName;function Ye(){Pe();const{user:s,isLoading:h}=be(),{toast:a}=Ne(),u=ye(),[o,f]=l.useState(!1),[j,x]=l.useState(!1),[v,k]=l.useState(!1),[g,C]=l.useState(!1),[t,n]=l.useState({firstName:"",lastName:"",displayName:"",position:"",phone:"",location:"",timezone:"Europe/Berlin",language:"de",privacyConsent:!1,sftpHost:"",sftpPort:21,sftpUsername:"",sftpPassword:"",sftpPath:"/",emailNotificationsEnabled:!0}),[d,w]=l.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[N,P]=l.useState(null),[z,b]=l.useState(null),{data:$=[]}=Se({queryKey:["/api/profile/project-roles"],enabled:!!s});l.useEffect(()=>{s&&n({firstName:(s==null?void 0:s.firstName)||"",lastName:(s==null?void 0:s.lastName)||"",displayName:(s==null?void 0:s.displayName)||"",position:(s==null?void 0:s.position)||"",phone:(s==null?void 0:s.phone)||"",location:(s==null?void 0:s.location)||"",timezone:(s==null?void 0:s.timezone)||"Europe/Berlin",language:(s==null?void 0:s.language)||"de",privacyConsent:(s==null?void 0:s.privacyConsent)||!1,sftpHost:(s==null?void 0:s.sftpHost)||"",sftpPort:(s==null?void 0:s.sftpPort)||21,sftpUsername:(s==null?void 0:s.sftpUsername)||"",sftpPassword:(s==null?void 0:s.sftpPassword)||"",sftpPath:(s==null?void 0:s.sftpPath)||"/",emailNotificationsEnabled:(s==null?void 0:s.emailNotificationsEnabled)??!0})},[s]);const U=F({mutationFn:async r=>{console.log("Frontend: Making API request with data:",r);try{const m=await L("/api/profile","PATCH",r);return console.log("Frontend: API response received:",m),m}catch(m){throw console.error("Frontend: API request failed:",m),m}},onSuccess:()=>{console.log("Frontend: Profile update successful"),a({title:"Profil aktualisiert",description:"Ihre Änderungen wurden erfolgreich gespeichert."}),u.invalidateQueries({queryKey:["/api/auth/user"]})},onError:r=>{console.error("Frontend: Profile update error:",r),a({title:"Fehler",description:`Die Profil-Aktualisierung ist fehlgeschlagen: ${r.message}`,variant:"destructive"})}}),R=F({mutationFn:async()=>await L("/api/profile/test-sftp","POST",{}),onSuccess:()=>{a({title:"SFTP-Verbindung erfolgreich",description:"Die Verbindung zu Ihrem SFTP-Server wurde erfolgreich getestet."})},onError:r=>{a({title:"SFTP-Verbindung fehlgeschlagen",description:"Überprüfen Sie Ihre SFTP-Einstellungen und versuchen Sie es erneut.",variant:"destructive"})}}),H=F({mutationFn:async r=>await L("/api/profile/change-password","POST",r),onSuccess:()=>{a({title:"Passwort geändert",description:"Ihr Passwort wurde erfolgreich aktualisiert."}),w({currentPassword:"",newPassword:"",confirmPassword:""}),x(!1)},onError:r=>{a({title:"Passwort-Änderung fehlgeschlagen",description:r.message||"Überprüfen Sie Ihr aktuelles Passwort und versuchen Sie es erneut.",variant:"destructive"})}}),_=F({mutationFn:async r=>{const m=new FormData;m.append("profileImage",r);const y=await fetch("/api/profile/upload-image",{method:"POST",body:m,credentials:"include"});if(!y.ok){const E=await y.json();throw new Error(E.message||"Upload fehlgeschlagen")}return y.json()},onSuccess:r=>{a({title:"Profilbild hochgeladen",description:"Ihr Profilbild wurde erfolgreich aktualisiert."}),u.invalidateQueries({queryKey:["/api/auth/user"]}),P(null),b(null)},onError:r=>{a({title:"Upload fehlgeschlagen",description:r.message||"Das Profilbild konnte nicht hochgeladen werden.",variant:"destructive"})}}),le=()=>{console.log("Saving profile data:",t),U.mutate(t)},oe=()=>{R.mutate()},de=()=>{window.location.href="/api/logout"},ce=()=>{a({title:"Passwort-Reset angefordert",description:"Eine E-Mail mit Anweisungen wurde an Ihre registrierte E-Mail-Adresse gesendet."})},he=()=>{if(d.newPassword!==d.confirmPassword){a({title:"Passwörter stimmen nicht überein",description:"Bitte stellen Sie sicher, dass beide Passwort-Felder identisch sind.",variant:"destructive"});return}if(d.newPassword.length<6){a({title:"Passwort zu kurz",description:"Das neue Passwort muss mindestens 6 Zeichen lang sein.",variant:"destructive"});return}H.mutate({currentPassword:d.currentPassword,newPassword:d.newPassword})},ue=r=>{var E;const m=(E=r.target.files)==null?void 0:E[0];if(!m)return;if(!m.type.startsWith("image/")){a({title:"Ungültiger Dateityp",description:"Bitte wählen Sie eine Bilddatei (JPG, PNG, etc.)",variant:"destructive"});return}if(m.size>5*1024*1024){a({title:"Datei zu groß",description:"Das Bild darf maximal 5MB groß sein.",variant:"destructive"});return}P(m);const y=new FileReader;y.onload=xe=>{var G;b((G=xe.target)==null?void 0:G.result)},y.readAsDataURL(m)},me=()=>{N&&_.mutate(N)};if(h)return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Laden..."})]})});const pe=(s==null?void 0:s.email)||"",V=s==null?void 0:s.role;return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto px-4",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center gap-4 mb-4",children:e.jsxs(ke,{to:"/",className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors",children:[e.jsx(ze,{className:"h-4 w-4"}),"Zurück"]})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Profil"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Verwalten Sie Ihre Kontoinformationen und Einstellungen"})]}),e.jsxs(I,{className:"mb-6",children:[e.jsxs(T,{children:[e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-5 w-5"}),"Persönliche Informationen"]}),e.jsx(B,{children:"Ihre grundlegenden Kontoinformationen und Profilbild"})]}),e.jsxs(M,{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-gray-200 dark:bg-gray-700 flex items-center justify-center",children:z?e.jsx("img",{src:z,alt:"Profilbild Vorschau",className:"w-full h-full object-cover"}):s!=null&&s.profileImageUrl?e.jsx("img",{src:s.profileImageUrl,alt:"Profilbild",className:"w-full h-full object-cover"}):e.jsx(W,{className:"h-12 w-12 text-gray-400"})}),e.jsx("label",{htmlFor:"profile-image-input",className:"absolute bottom-0 right-0 bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-full cursor-pointer transition-colors",children:e.jsx(Ee,{className:"h-4 w-4"})}),e.jsx("input",{id:"profile-image-input",type:"file",accept:"image/*",onChange:ue,className:"hidden"})]}),N&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(p,{onClick:me,disabled:_.isPending,size:"sm",children:[e.jsx(Fe,{className:"h-4 w-4 mr-2"}),_.isPending?"Uploade...":"Hochladen"]}),e.jsx(p,{onClick:()=>{P(null),b(null)},variant:"outline",size:"sm",children:"Abbrechen"})]})]}),e.jsx(S,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"firstName",children:"Vorname"}),e.jsx(c,{id:"firstName",value:t.firstName,onChange:r=>n({...t,firstName:r.target.value}),placeholder:"Ihr Vorname"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"lastName",children:"Nachname"}),e.jsx(c,{id:"lastName",value:t.lastName,onChange:r=>n({...t,lastName:r.target.value}),placeholder:"Ihr Nachname"})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"displayName",children:"Anzeigename / Benutzername"}),e.jsx(c,{id:"displayName",value:t.displayName,onChange:r=>n({...t,displayName:r.target.value}),placeholder:"Wie sollen andere Sie sehen?"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Öffentlich sichtbarer Name in der Anwendung"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"position",children:"Position / Rolle im Unternehmen"}),e.jsx(c,{id:"position",value:t.position,onChange:r=>n({...t,position:r.target.value}),placeholder:"z.B. Projektleiter, Bauingenieur, Sachverständiger"})]}),e.jsx(S,{}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"email",children:"E-Mail"}),e.jsx(c,{id:"email",value:pe,disabled:!0,className:"bg-gray-50 dark:bg-gray-800"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"E-Mail-Adresse kann nicht geändert werden"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"phone",children:"Telefonnummer (optional)"}),e.jsx(c,{id:"phone",value:t.phone,onChange:r=>n({...t,phone:r.target.value}),placeholder:"+49 123 456789"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"location",children:"Standort / Büro"}),e.jsx(c,{id:"location",value:t.location,onChange:r=>n({...t,location:r.target.value}),placeholder:"z.B. München, Frankfurt am Main"})]}),e.jsx(S,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"timezone",children:"Zeitzone"}),e.jsxs("select",{id:"timezone",value:t.timezone,onChange:r=>n({...t,timezone:r.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:"Europe/Berlin",children:"Europe/Berlin (MEZ)"}),e.jsx("option",{value:"Europe/Vienna",children:"Europe/Vienna (MEZ)"}),e.jsx("option",{value:"Europe/Zurich",children:"Europe/Zurich (MEZ)"}),e.jsx("option",{value:"UTC",children:"UTC"}),e.jsx("option",{value:"America/New_York",children:"America/New_York (EST)"}),e.jsx("option",{value:"America/Los_Angeles",children:"America/Los_Angeles (PST)"})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"language",children:"Sprache"}),e.jsxs("select",{id:"language",value:t.language,onChange:r=>n({...t,language:r.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:"de",children:"Deutsch"}),e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"fr",children:"Français"}),e.jsx("option",{value:"es",children:"Español"})]})]})]}),e.jsx(S,{}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"role",children:"System-Rolle"}),e.jsx("div",{className:"mt-2",children:e.jsx(Ce,{variant:"outline",className:"capitalize",children:V==="admin"?"Administrator":V==="manager"?"Manager":V==="user"?"Benutzer":"Lädt..."})}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"System-Rolle kann nur von Administratoren geändert werden"})]})]})]}),e.jsxs(I,{className:"mb-6",children:[e.jsxs(T,{children:[e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"h-5 w-5"}),"Datenschutz & Benachrichtigungen"]}),e.jsx(B,{children:"Steuern Sie Ihre Privatsphäre-Einstellungen"})]}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"privacy-consent",children:"Datenschutzerklärung akzeptiert"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Zustimmung zur Datenverarbeitung"})]}),e.jsx(q,{id:"privacy-consent",checked:t.privacyConsent,onCheckedChange:r=>n({...t,privacyConsent:r})})]}),e.jsx(S,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"email-notifications",children:"E-Mail-Benachrichtigungen"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Benachrichtigungen über Projektaktivitäten"})]}),e.jsx(q,{id:"email-notifications",checked:t.emailNotificationsEnabled,onCheckedChange:r=>n({...t,emailNotificationsEnabled:r})})]})]})]}),e.jsxs(I,{className:"mb-6",children:[e.jsxs(T,{children:[e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(Te,{className:"h-5 w-5"}),"SFTP-Konfiguration (Hetzner Cloud)"]}),e.jsx(B,{children:"Konfigurieren Sie Ihre Hetzner Cloud SFTP-Verbindung mit ProFTPD für sichere Datei-Uploads"})]}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"sftpHost",children:"SFTP-Host (Hetzner Server IP)"}),e.jsx(c,{id:"sftpHost",value:t.sftpHost,onChange:r=>n({...t,sftpHost:r.target.value}),placeholder:"128.140.82.20"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"IPv4-Adresse Ihres Hetzner Cloud Servers"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"sftpPort",children:"Port"}),e.jsx(c,{id:"sftpPort",type:"number",value:t.sftpPort,onChange:r=>n({...t,sftpPort:parseInt(r.target.value)||21}),placeholder:"21"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Standard: 21 (FTP) oder 22 (SFTP)"})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"sftpUsername",children:"FTP-Benutzername"}),e.jsx(c,{id:"sftpUsername",value:t.sftpUsername,onChange:r=>n({...t,sftpUsername:r.target.value}),placeholder:"z.B. baustructura_user"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Von ProFTPD erstellter FTP-Benutzer"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"sftpPassword",children:"Passwort"}),e.jsxs("div",{className:"relative",children:[e.jsx(c,{id:"sftpPassword",type:o?"text":"password",value:t.sftpPassword,onChange:r=>n({...t,sftpPassword:r.target.value}),placeholder:"ihr-passwort"}),e.jsx(p,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>f(!o),children:o?e.jsx(O,{className:"h-4 w-4"}):e.jsx(Z,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"sftpPath",children:"Upload-Pfad"}),e.jsx(c,{id:"sftpPath",value:t.sftpPath,onChange:r=>n({...t,sftpPath:r.target.value}),placeholder:"/var/ftp/uploads/"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Zielverzeichnis auf dem Hetzner Server"})]}),e.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[e.jsx("h4",{className:"font-semibold text-green-900 dark:text-green-100 mb-3",children:"✅ Ihr Hetzner Server: replit-sftp"}),e.jsxs("div",{className:"space-y-2 text-sm text-green-800 dark:text-green-200",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Server-IP:"})," 128.140.82.20"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Standort:"})," Falkenstein, Deutschland"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," Bereit für ProFTPD Installation"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Nächster Schritt:"}),e.jsx("a",{href:"/docs/hetzner-sftp-setup.md",target:"_blank",className:"underline ml-1 hover:text-green-600",children:"Vollständige Setup-Anleitung öffnen"})]})]})]}),e.jsxs("div",{className:"mt-4 p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-800",children:[e.jsx("h4",{className:"font-semibold text-purple-900 dark:text-purple-100 mb-3",children:"💡 Multi-Tenant Architektur - Ein Server für alle Benutzer"}),e.jsxs("div",{className:"space-y-2 text-sm text-purple-800 dark:text-purple-200",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Kosten:"})," Nur EINE Hetzner Lizenz (~5€/Monat) für unbegrenzte Bau-Structura Benutzer"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Isolation:"})," Jeder Benutzer erhält automatisch seinen eigenen sicheren SFTP-Bereich"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Ihr Bereich:"})," /var/ftp/user_",(s==null?void 0:s.id)||"YOUR_ID","/uploads/"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Quota:"})," 1GB Speicherplatz pro Benutzer (erweiterbar)"]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(p,{onClick:()=>{a({title:"Multi-Tenant Setup",description:"Automatische SFTP-Account-Erstellung wird nach Server-Setup verfügbar sein."})},variant:"outline",className:"w-full",children:"🚀 Automatischen SFTP-Account erstellen (nach Server-Setup)"})}),e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsx("h4",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-3",children:"🔧 Admin: Multi-Tenant Server Setup"}),e.jsxs("div",{className:"space-y-2 text-sm text-blue-800 dark:text-blue-200",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"1. SSH:"})," ",e.jsx("code",{className:"bg-blue-100 dark:bg-blue-800 px-1 rounded",children:"ssh root@128.140.82.20"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"2. Multi-Tenant ProFTPD:"})," Siehe docs/multi-tenant-sftp-architecture.md"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"3. Auto-User-Creation:"})," PostgreSQL + Benutzer-spezifische Verzeichnisse"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"4. Sicherheit:"})," Vollständige Benutzer-Isolation + Quota-System"]})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(p,{onClick:oe,variant:"outline",disabled:R.isPending,children:R.isPending?"Teste...":"Verbindung testen"})})]})]}),e.jsxs(I,{className:"mb-6",children:[e.jsxs(T,{children:[e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"h-5 w-5"}),"Konto-Aktionen"]}),e.jsx(B,{children:"Verwalten Sie Ihr Konto und Ihre Sicherheitseinstellungen"})]}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(p,{onClick:()=>x(!j),variant:"outline",className:"flex-1",children:"Passwort ändern"}),e.jsx(p,{onClick:ce,variant:"outline",className:"flex-1",children:"Passwort zurücksetzen"}),e.jsx(p,{onClick:de,variant:"destructive",className:"flex-1",children:"Abmelden"})]}),j&&e.jsxs("div",{className:"mt-4 p-4 border rounded-lg bg-gray-50 dark:bg-gray-800",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Passwort ändern"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"currentPassword",children:"Aktuelles Passwort"}),e.jsx(c,{id:"currentPassword",type:"password",value:d.currentPassword,onChange:r=>w({...d,currentPassword:r.target.value}),placeholder:"Ihr aktuelles Passwort"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"newPassword",children:"Neues Passwort"}),e.jsxs("div",{className:"relative",children:[e.jsx(c,{id:"newPassword",type:v?"text":"password",value:d.newPassword,onChange:r=>w({...d,newPassword:r.target.value}),placeholder:"Mindestens 6 Zeichen",className:"pr-10"}),e.jsx(p,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2",onClick:()=>k(!v),children:v?e.jsx(O,{className:"h-4 w-4"}):e.jsx(Z,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"confirmPassword",children:"Passwort bestätigen"}),e.jsxs("div",{className:"relative",children:[e.jsx(c,{id:"confirmPassword",type:g?"text":"password",value:d.confirmPassword,onChange:r=>w({...d,confirmPassword:r.target.value}),placeholder:"Passwort wiederholen",className:"pr-10"}),e.jsx(p,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2",onClick:()=>C(!g),children:g?e.jsx(O,{className:"h-4 w-4"}):e.jsx(Z,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{onClick:he,disabled:H.isPending,size:"sm",children:H.isPending?"Speichere...":"Passwort ändern"}),e.jsx(p,{onClick:()=>{x(!1),w({currentPassword:"",newPassword:"",confirmPassword:""})},variant:"outline",size:"sm",children:"Abbrechen"})]})]})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("p",{children:"• Passwort ändern: Direkte Änderung mit aktuellem Passwort"}),e.jsx("p",{children:"• Passwort zurücksetzen: E-Mail mit Anweisungen"}),e.jsx("p",{children:"• Abmelden: Beendet Ihre aktuelle Sitzung"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(p,{onClick:le,disabled:U.isPending,className:"w-full sm:w-auto",children:U.isPending?"Speichere...":"Änderungen speichern"})})]})})}export{Ye as default};
